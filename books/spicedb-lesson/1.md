---
title: "はじめに"
---

認証と認可はまとめて同じ文脈で説明されることが多いですが実際の実装例や解説は認証についてのものが多いように感じます。
それは当然で認証という仕組みはほぼすべてのアプリケーション、システムで必要ですが認可の仕組みについては必須ではないです。
実際、筆者も5年近く開発業務をしてきましたが本格的な認可システムの実装をしたことはほとんどありません。

もちろん、開発するアプリケーションやシステムの種類にもよりますが認証と比べると認可システムの実装機会というものは意外と少ないように筆者は感じます。

認可システムを愚直に実装しようとするとDBやdomain層にRoleというモデルを作成し、ユーザーと紐づけて権限を管理するといった実装になるでしょう。
しかし、このような実装はアプリケーションと認可の仕組みが密になり変更に弱くなります。

特にスタートアップのような要件が日々変化し、スピート感のある開発をしている中で認可の仕組みを実装する場合、変更に強い柔軟な認可システムが求められます。

本記事で紹介するSpiceDBはまさにそういったアプリケーションと認可システムを切り離し、変更に強い柔軟な認可システムを構築するための強力なツールです。
また、特定のリソースに対してのアクセス制御、いわゆるACL(Access Control List)を実装するのもSpiceDBの柔軟さがあれば容易です。

SpiceDBにおける認可システムにおいて特定のリソースに対するアクセス制御は以下のように表現できます。

```
resource:resource_id_1#read@user:alice
```

今、この表現を理解する必要はありませんがaliceというユーザーがresource_id_1というリソースに対してread権限を持っているかどうかを問い合わせていることが直感的にわかると思います。
それがSpiceDBの利点の一つとも言えるでしょう。

本書ではSpiceDBの基本的な仕組みと構築方法、使用方法などを紹介します。
本書を執筆している時点でSpiceDBの採用例や情報、特に日本語の情報は多くはありません。
本書がSpiceDBへの興味のきっかけになったり、採用する例が増えるきっかけになればいいなと思います。

## 使用技術

- zed client: zed v0.30.1
- minikube: minikube version: v1.35.0
- Go: 1.24.2
- tsc: ^2.0.4
- github.com/authzed/authzed-go: v1.4.0
- @authzed/authzed-node: ^1.3.1

本書の中でスキーマファイルをローカルで編集することがあるかもしれませんが、SpiceDBの開発元であるAuthZedからVSCodeの拡張機能が提供されているのでインストールしておくと良いかもしれません。

https://marketplace.visualstudio.com/items?itemName=authzed.spicedb-vscode

## 本書のサンプルコード

本書で使ったサンプルコードは以下のリポジトリに配置しています。

https://github.com/JY8752/spicedb-demo